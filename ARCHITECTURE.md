# ğŸ—ï¸ System Architecture Diagram

## High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USERS (Browsers)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ HTTPS
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   RENDER WEB SERVICE (Flask)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                     Flask Application                          â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ REST API (JSON)                                          â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ WebSocket (Socket.io)                                    â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ Authentication (JWT)                                     â”‚ â”‚
â”‚  â”‚  â””â”€â”€ Static Files (React Build)                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                    â”‚                    â”‚
             â”‚ SQL                â”‚ Pub/Sub            â”‚ Task Queue
             â–¼                    â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PostgreSQL DB     â”‚  â”‚  Redis Cache   â”‚  â”‚  Celery Workers      â”‚
â”‚                    â”‚  â”‚                â”‚  â”‚                      â”‚
â”‚  â€¢ users           â”‚  â”‚  â€¢ Sessions    â”‚  â”‚  â€¢ Email Sender      â”‚
â”‚  â€¢ smtp_servers    â”‚  â”‚  â€¢ WebSocket   â”‚  â”‚  â€¢ SMTP Verifier     â”‚
â”‚  â€¢ campaigns       â”‚  â”‚  â€¢ Task Queue  â”‚  â”‚  â€¢ FROM Verifier     â”‚
â”‚  â€¢ from_addresses  â”‚  â”‚  â€¢ Rate Limit  â”‚  â”‚  â€¢ IMAP Monitor      â”‚
â”‚  â€¢ recipients      â”‚  â”‚  â€¢ Pub/Sub     â”‚  â”‚  â€¢ Cleanup Tasks     â”‚
â”‚  â€¢ templates       â”‚  â”‚                â”‚  â”‚                      â”‚
â”‚  â€¢ logs            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  â€¢ imap_accounts   â”‚
â”‚  â€¢ verification    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Request Flow Diagram

### 1. Campaign Creation & Execution

```
User Browser
    â”‚
    â”‚ 1. POST /api/campaigns (Create Campaign)
    â–¼
Flask API
    â”‚
    â”‚ 2. Validate & Save to DB
    â–¼
PostgreSQL
    â”‚
    â”‚ 3. Queue Background Task
    â–¼
Redis (Task Queue)
    â”‚
    â”‚ 4. Worker Picks Up Task
    â–¼
Celery Worker
    â”‚
    â”‚ 5. Load Campaign Data
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                     â”‚
    â”‚ 6. Get SMTP Server (Rotation)      â”‚ 7. Load Recipients
    â–¼                                     â–¼
SMTP Manager                         Database
    â”‚                                     â”‚
    â”‚ 8. Send Email                       â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚                                     â”‚
    â”‚ 9. Update Stats                     â”‚
    â–¼                                     â–¼
Redis (Pub/Sub)                     PostgreSQL
    â”‚                                     â”‚
    â”‚ 10. Broadcast Update                â”‚
    â–¼                                     â”‚
WebSocket Server â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ 11. Push to Connected Clients
    â–¼
User Browser (Live Update)
```

---

## Component Interaction Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        FRONTEND (React)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Dashboard   â”‚  â”‚  Campaign    â”‚  â”‚  Real-Time Updates   â”‚ â”‚
â”‚  â”‚  Components  â”‚  â”‚  Management  â”‚  â”‚  (Socket.io Client)  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                  â”‚                      â”‚
          â”‚ HTTP REST        â”‚ HTTP REST            â”‚ WebSocket
          â–¼                  â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      BACKEND (Flask)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    API Layer                                â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ /api/smtp      (SMTP CRUD)                            â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ /api/campaigns (Campaign CRUD)                        â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ /api/stats     (Statistics)                           â”‚ â”‚
â”‚  â”‚  â””â”€â”€ /ws            (WebSocket Events)                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚           â”‚                                    â”‚                 â”‚
â”‚           â–¼                                    â–¼                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Service Layer    â”‚              â”‚  WebSocket Manager  â”‚   â”‚
â”‚  â”‚                    â”‚              â”‚                     â”‚   â”‚
â”‚  â”‚  â€¢ SMTPManager     â”‚              â”‚  â€¢ Rooms/Channels   â”‚   â”‚
â”‚  â”‚  â€¢ SendingManager  â”‚              â”‚  â€¢ Event Broadcast  â”‚   â”‚
â”‚  â”‚  â€¢ VerifyManager   â”‚              â”‚  â€¢ Connection Pool  â”‚   â”‚
â”‚  â”‚  â€¢ MonitorManager  â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚                â”‚
â”‚           â”‚                                    â”‚                 â”‚
â”‚           â–¼                                    â”‚                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚                 â”‚
â”‚  â”‚   Database Layer   â”‚                       â”‚                 â”‚
â”‚  â”‚   (SQLAlchemy)     â”‚                       â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                                   â”‚
            â–¼                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    PostgreSQL DB      â”‚          â”‚    Redis Pub/Sub        â”‚
â”‚                       â”‚          â”‚                         â”‚
â”‚  â€¢ Data Persistence   â”‚          â”‚  â€¢ Real-time Events     â”‚
â”‚  â€¢ ACID Transactions  â”‚          â”‚  â€¢ Session Storage      â”‚
â”‚  â€¢ Indexing           â”‚          â”‚  â€¢ Cache Layer          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚   Background Workers (Celery)  â”‚
            â”‚                                â”‚
            â”‚  Worker 1: Email Sending       â”‚
            â”‚  Worker 2: Email Sending       â”‚
            â”‚  Worker 3: Verification        â”‚
            â”‚  Worker 4: Monitoring          â”‚
            â”‚  Worker 5: Cleanup             â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â”‚ Reads/Writes
                        â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Redis (Task Queue)    â”‚
            â”‚                        â”‚
            â”‚  â€¢ Pending Tasks       â”‚
            â”‚  â€¢ Task Results        â”‚
            â”‚  â€¢ Priority Queues     â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow: Email Sending Campaign

```
Step 1: User Creates Campaign
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User clicks  â”‚
â”‚ "Start Send" â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend validates & sends:            â”‚
â”‚  {                                     â”‚
â”‚    name: "Test Campaign",              â”‚
â”‚    recipients: [...],                  â”‚
â”‚    from_mode: "verified",              â”‚
â”‚    template_id: "xxx",                 â”‚
â”‚    threads: 10,                        â”‚
â”‚    delay: 1                            â”‚
â”‚  }                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Flask API: POST /api/campaigns/start     â”‚
â”‚  â€¢ Authenticates user                    â”‚
â”‚  â€¢ Validates payload                     â”‚
â”‚  â€¢ Creates campaign record (DB)          â”‚
â”‚  â€¢ Queues background task                â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Celery: email_sending_task.delay()       â”‚
â”‚  Task ID: abc123                         â”‚
â”‚  Priority: High                          â”‚
â”‚  Queue: email_sending_queue              â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Worker Processes Task:                               â”‚
â”‚                                                       â”‚
â”‚  FOR each recipient:                                 â”‚
â”‚    1. Get next SMTP (rotation)                       â”‚
â”‚    2. Get next FROM address (rotation)               â”‚
â”‚    3. Personalize template                           â”‚
â”‚    4. Try sending (max 5 retries)                    â”‚
â”‚    5. Update campaign stats                          â”‚
â”‚    6. Broadcast progress via Redis Pub/Sub           â”‚
â”‚    7. Sleep (delay)                                  â”‚
â”‚                                                       â”‚
â”‚  SMTP Rotation Logic:                                â”‚
â”‚    â€¢ Round-robin selection                           â”‚
â”‚    â€¢ Skip failed servers (>10 failures)              â”‚
â”‚    â€¢ Track success/failure counts                    â”‚
â”‚    â€¢ Auto-remove dead servers                        â”‚
â”‚                                                       â”‚
â”‚  Error Handling:                                     â”‚
â”‚    â€¢ Network error â†’ Retry with different SMTP       â”‚
â”‚    â€¢ Auth error â†’ Mark SMTP as failed                â”‚
â”‚    â€¢ Timeout â†’ Retry up to 5 times                   â”‚
â”‚    â€¢ VPN drop â†’ Sleep 30s, retry all                 â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Redis Pub/Sub broadcasts:                â”‚
â”‚  {                                        â”‚
â”‚    event: "campaign_progress",           â”‚
â”‚    campaign_id: "xxx",                   â”‚
â”‚    sent: 150,                            â”‚
â”‚    failed: 5,                            â”‚
â”‚    remaining: 845,                       â”‚
â”‚    speed: 120 // emails per minute       â”‚
â”‚  }                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WebSocket Server receives event          â”‚
â”‚  â€¢ Identifies subscribed clients         â”‚
â”‚  â€¢ Broadcasts to all connected users     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend receives WebSocket message      â”‚
â”‚  â€¢ Updates progress bar                  â”‚
â”‚  â€¢ Updates sent/failed counters          â”‚
â”‚  â€¢ Adds to activity log                  â”‚
â”‚  â€¢ Updates speed chart                   â”‚
â”‚  â€¢ No page refresh needed!               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Security Layers                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  1. HTTPS/TLS (Transport Layer)                         â”‚
â”‚     â””â”€> All traffic encrypted                           â”‚
â”‚                                                          â”‚
â”‚  2. JWT Authentication (Application Layer)              â”‚
â”‚     â”œâ”€> Token-based auth                                â”‚
â”‚     â”œâ”€> Short-lived tokens (1 hour)                     â”‚
â”‚     â”œâ”€> Refresh token rotation                          â”‚
â”‚     â””â”€> Secure HTTP-only cookies                        â”‚
â”‚                                                          â”‚
â”‚  3. Password Security                                    â”‚
â”‚     â”œâ”€> bcrypt hashing (12 rounds)                      â”‚
â”‚     â”œâ”€> Salted hashes                                   â”‚
â”‚     â””â”€> No plaintext storage                            â”‚
â”‚                                                          â”‚
â”‚  4. SMTP Credential Encryption (Data Layer)             â”‚
â”‚     â”œâ”€> AES-256 encryption                              â”‚
â”‚     â”œâ”€> Unique encryption key per user                  â”‚
â”‚     â””â”€> Key stored in environment variable              â”‚
â”‚                                                          â”‚
â”‚  5. API Rate Limiting                                   â”‚
â”‚     â”œâ”€> 100 requests/minute per user                    â”‚
â”‚     â”œâ”€> Redis-based tracking                            â”‚
â”‚     â””â”€> Progressive backoff                             â”‚
â”‚                                                          â”‚
â”‚  6. Input Validation                                    â”‚
â”‚     â”œâ”€> Email format validation                         â”‚
â”‚     â”œâ”€> SQL injection prevention (ORM)                  â”‚
â”‚     â”œâ”€> XSS protection (sanitization)                   â”‚
â”‚     â””â”€> CSRF tokens                                     â”‚
â”‚                                                          â”‚
â”‚  7. Role-Based Access Control (RBAC)                    â”‚
â”‚     â”œâ”€> Admin role (full access)                        â”‚
â”‚     â”œâ”€> User role (own resources only)                  â”‚
â”‚     â””â”€> Middleware enforcement                          â”‚
â”‚                                                          â”‚
â”‚  8. Audit Logging                                       â”‚
â”‚     â”œâ”€> All API calls logged                            â”‚
â”‚     â”œâ”€> Failed login attempts tracked                   â”‚
â”‚     â””â”€> Suspicious activity alerts                      â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Scalability Architecture

```
Current Architecture (Single Instance)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Render Web Service                    â”‚
â”‚  â”œâ”€â”€ Flask API (1 instance)            â”‚
â”‚  â”œâ”€â”€ Celery Worker (1 instance)        â”‚
â”‚  â”œâ”€â”€ PostgreSQL (1 instance)           â”‚
â”‚  â””â”€â”€ Redis (1 instance)                â”‚
â”‚                                         â”‚
â”‚  Capacity:                              â”‚
â”‚  â€¢ 100 concurrent users                 â”‚
â”‚  â€¢ 10,000 emails/hour                   â”‚
â”‚  â€¢ 50 active campaigns                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Future Scale-Out Architecture
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Load Balancer (Render)                               â”‚
â”‚  â””â”€> Round-robin to multiple Flask instances          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
    â–¼         â–¼        â–¼        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Flask 1 â”‚ Flask 2 â”‚ Flask 3 â”‚ Flask 4 â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚         â”‚         â”‚         â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  Redis Cluster â”‚
         â”‚  (Pub/Sub)     â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â–¼             â–¼             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Worker 1 â”‚ Worker 2 â”‚ Worker 3 â”‚ ... (N workers)
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚          â”‚          â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ PostgreSQL      â”‚
    â”‚ (Read Replicas) â”‚
    â”‚  Master â”€> Slaveâ”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Capacity:
â€¢ 10,000+ concurrent users
â€¢ 1,000,000+ emails/hour
â€¢ Unlimited campaigns
â€¢ Horizontal scaling
```

---

## Deployment Architecture (Render)

```
render.yaml configuration:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  services:                                        â”‚
â”‚                                                   â”‚
â”‚  1. Web Service (Flask)                           â”‚
â”‚     â”œâ”€â”€ Type: web                                 â”‚
â”‚     â”œâ”€â”€ Runtime: Python 3.11                      â”‚
â”‚     â”œâ”€â”€ Build: pip install -r requirements.txt    â”‚
â”‚     â”œâ”€â”€ Start: gunicorn app:app                   â”‚
â”‚     â”œâ”€â”€ Instance: Starter ($7/month)              â”‚
â”‚     â””â”€â”€ Env Vars: DATABASE_URL, REDIS_URL, etc.   â”‚
â”‚                                                   â”‚
â”‚  2. Background Worker (Celery)                    â”‚
â”‚     â”œâ”€â”€ Type: worker                              â”‚
â”‚     â”œâ”€â”€ Runtime: Python 3.11                      â”‚
â”‚     â”œâ”€â”€ Build: pip install -r requirements.txt    â”‚
â”‚     â”œâ”€â”€ Start: celery -A tasks worker             â”‚
â”‚     â”œâ”€â”€ Instance: Starter ($7/month)              â”‚
â”‚     â””â”€â”€ Env Vars: Same as web service             â”‚
â”‚                                                   â”‚
â”‚  3. PostgreSQL Database                           â”‚
â”‚     â”œâ”€â”€ Type: database                            â”‚
â”‚     â”œâ”€â”€ Plan: Starter ($7/month)                  â”‚
â”‚     â”œâ”€â”€ Version: PostgreSQL 15                    â”‚
â”‚     â””â”€â”€ Auto-backups: Yes                         â”‚
â”‚                                                   â”‚
â”‚  4. Redis Instance                                â”‚
â”‚     â”œâ”€â”€ Type: redis                               â”‚
â”‚     â”œâ”€â”€ Plan: Free (25MB) or Starter              â”‚
â”‚     â””â”€â”€ Maxmemory policy: allkeys-lru             â”‚
â”‚                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Total Monthly Cost:
â€¢ Free Tier: $0 (with limitations)
â€¢ Starter Tier: ~$21/month (web + worker + db)
â€¢ Production: ~$50+/month (scaled resources)
```

---

## Technology Stack Summary

```
FRONTEND
â”œâ”€â”€ React 18           (UI Framework)
â”œâ”€â”€ Vite              (Build Tool)
â”œâ”€â”€ Tailwind CSS      (Styling)
â”œâ”€â”€ Chart.js          (Visualizations)
â”œâ”€â”€ Socket.io-client  (Real-time)
â”œâ”€â”€ React Query       (Data Fetching)
â””â”€â”€ React Router      (Navigation)

BACKEND
â”œâ”€â”€ Flask 3.0         (Web Framework)
â”œâ”€â”€ Flask-SocketIO    (WebSocket)
â”œâ”€â”€ SQLAlchemy        (ORM)
â”œâ”€â”€ Flask-JWT         (Authentication)
â”œâ”€â”€ Celery            (Task Queue)
â”œâ”€â”€ Gunicorn          (WSGI Server)
â””â”€â”€ Alembic           (Migrations)

DATABASE
â”œâ”€â”€ PostgreSQL 15     (Primary DB)
â””â”€â”€ Redis 7           (Cache + Queue)

DEPLOYMENT
â”œâ”€â”€ Render            (Cloud Platform)
â”œâ”€â”€ Docker            (Containerization)
â””â”€â”€ GitHub Actions    (CI/CD)

MONITORING
â”œâ”€â”€ Sentry            (Error Tracking)
â”œâ”€â”€ Loguru            (Logging)
â””â”€â”€ Prometheus        (Metrics)
```

---

This architecture provides:
âœ… **Scalability** - Horizontal scaling ready
âœ… **Reliability** - Background workers prevent blocking
âœ… **Real-time** - WebSocket for instant updates
âœ… **Security** - Multi-layer protection
âœ… **Performance** - Redis caching and task queuing
âœ… **Maintainability** - Clean separation of concerns
